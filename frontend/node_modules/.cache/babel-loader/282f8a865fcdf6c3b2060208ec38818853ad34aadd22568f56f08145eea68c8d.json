{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import UserNavbar from'../components/UserNavbar';import'../styles/ProfilePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfilePage=()=>{const user=JSON.parse(localStorage.getItem('user'))||{};const[postedItems,setPostedItems]=useState([]);const[error,setError]=useState('');useEffect(()=>{const fetchPostedItems=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('http://localhost:5000/api/items',{headers:{Authorization:`Bearer ${token}`}});setPostedItems(response.data);// Assume the API returns an array of items\n}catch(err){console.error('Error fetching posted items:',err);setError('Failed to load your posted items. Please try again.');}};fetchPostedItems();},[]);const handleLogout=()=>{localStorage.removeItem('user');localStorage.removeItem('token');window.location.href='/login';};const handleDeleteAccount=async()=>{if(!window.confirm('Are you sure you want to delete your account? This action cannot be undone.')){return;}try{const token=localStorage.getItem('token');await axios.delete('http://localhost:5000/api/auth/delete-account',{headers:{Authorization:`Bearer ${token}`}});alert('Your account has been successfully deleted.');localStorage.removeItem('user');localStorage.removeItem('token');window.location.href='/login';}catch(error){var _error$response;console.error('Error deleting account:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert('An error occurred while deleting your account. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsx(UserNavbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:\"profile-icon.png\",alt:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"User Type:\"}),\" \",user.userType]}),/*#__PURE__*/_jsx(Link,{to:\"/post-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"profile-btn\",children:\"Post an Item\"})}),/*#__PURE__*/_jsx(Link,{to:\"/update-account\",children:/*#__PURE__*/_jsx(\"button\",{className:\"profile-btn\",children:\"Update Account\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-btn\",onClick:handleLogout,children:\"Log-out\"}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-btn delete-btn\",onClick:handleDeleteAccount,children:\"Delete Account\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Posted Items\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"posted-items\",children:postedItems.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No posted items found.\"}):postedItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"posted-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:`http://localhost:5000/${item.image}`,alt:item.description,className:\"item-image\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",item.description]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",item.category]})]},item._id))})]})]})]});};export default ProfilePage;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","UserNavbar","jsx","_jsx","jsxs","_jsxs","ProfilePage","user","JSON","parse","localStorage","getItem","postedItems","setPostedItems","error","setError","fetchPostedItems","token","response","get","headers","Authorization","data","err","console","handleLogout","removeItem","window","location","href","handleDeleteAccount","confirm","delete","alert","_error$response","message","className","children","src","alt","email","userType","to","onClick","length","map","item","image","description","category","_id"],"sources":["C:/Users/Kenneth/OneDrive/Desktop/test1/frontend/src/pages/ProfilePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport UserNavbar from '../components/UserNavbar';\r\nimport '../styles/ProfilePage.css';\r\n\r\nconst ProfilePage = () => {\r\n  const user = JSON.parse(localStorage.getItem('user')) || {};\r\n  const [postedItems, setPostedItems] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchPostedItems = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await axios.get('http://localhost:5000/api/items', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        setPostedItems(response.data); // Assume the API returns an array of items\r\n      } catch (err) {\r\n        console.error('Error fetching posted items:', err);\r\n        setError('Failed to load your posted items. Please try again.');\r\n      }\r\n    };\r\n\r\n    fetchPostedItems();\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('token');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    if (!window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete('http://localhost:5000/api/auth/delete-account', {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      alert('Your account has been successfully deleted.');\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    } catch (error) {\r\n      console.error('Error deleting account:', error.response?.data || error.message);\r\n      alert('An error occurred while deleting your account. Please try again.');\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <UserNavbar />\r\n      <div className=\"profile-container\">\r\n        {/* Left Sidebar */}\r\n        <div className=\"profile-sidebar\">\r\n          <div className=\"profile-icon\">\r\n            <img src=\"profile-icon.png\" alt=\"Profile\" />\r\n          </div>\r\n          <div className=\"user-info\">\r\n            <p><strong>Username:</strong> {user.email}</p>\r\n            <p><strong>User Type:</strong> {user.userType}</p>\r\n            <Link to=\"/post-item\">\r\n              <button className=\"profile-btn\">Post an Item</button>\r\n            </Link>\r\n            <Link to=\"/update-account\">\r\n              <button className=\"profile-btn\">Update Account</button>\r\n            </Link>\r\n            <button className=\"profile-btn\" onClick={handleLogout}>Log-out</button>\r\n            <button className=\"profile-btn delete-btn\" onClick={handleDeleteAccount}>Delete Account</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Content: Displaying Posted Items */}\r\n        <div className=\"profile-content\">\r\n          <h2>Your Posted Items</h2>\r\n          {error && <p className=\"error\">{error}</p>}\r\n          <div className=\"posted-items\">\r\n            {postedItems.length === 0 ? (\r\n              <p>No posted items found.</p>\r\n            ) : (\r\n              postedItems.map((item) => (\r\n                <div key={item._id} className=\"posted-item\">\r\n                  <img src={`http://localhost:5000/${item.image}`} alt={item.description} className=\"item-image\" />\r\n                  <p><strong>Description:</strong> {item.description}</p>\r\n                  <p><strong>Category:</strong> {item.category}</p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnC,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,CAAC,CAAC,CAC3D,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGP,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,CAAC,iCAAiC,CAAE,CAClEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUJ,KAAK,EAChC,CACF,CAAC,CAAC,CACFJ,cAAc,CAACK,QAAQ,CAACI,IAAI,CAAC,CAAE;AACjC,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACV,KAAK,CAAC,8BAA8B,CAAES,GAAG,CAAC,CAClDR,QAAQ,CAAC,qDAAqD,CAAC,CACjE,CACF,CAAC,CAEDC,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,YAAY,CAAGA,CAAA,GAAM,CACzBf,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC,CAC/BhB,YAAY,CAACgB,UAAU,CAAC,OAAO,CAAC,CAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CAACH,MAAM,CAACI,OAAO,CAAC,6EAA6E,CAAC,CAAE,CAClG,OACF,CAEA,GAAI,CACF,KAAM,CAAAd,KAAK,CAAGP,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAZ,KAAK,CAACiC,MAAM,CAAC,+CAA+C,CAAE,CAClEZ,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUJ,KAAK,EAChC,CACF,CAAC,CAAC,CAEFgB,KAAK,CAAC,6CAA6C,CAAC,CACpDvB,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC,CAC/BhB,YAAY,CAACgB,UAAU,CAAC,OAAO,CAAC,CAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAAE,MAAOf,KAAK,CAAE,KAAAoB,eAAA,CACdV,OAAO,CAACV,KAAK,CAAC,yBAAyB,CAAE,EAAAoB,eAAA,CAAApB,KAAK,CAACI,QAAQ,UAAAgB,eAAA,iBAAdA,eAAA,CAAgBZ,IAAI,GAAIR,KAAK,CAACqB,OAAO,CAAC,CAC/EF,KAAK,CAAC,kEAAkE,CAAC,CAC3E,CACF,CAAC,CAGD,mBACE5B,KAAA,QAAK+B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BlC,IAAA,CAACF,UAAU,GAAE,CAAC,cACdI,KAAA,QAAK+B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAEhChC,KAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BlC,IAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BlC,IAAA,QAAKmC,GAAG,CAAC,kBAAkB,CAACC,GAAG,CAAC,SAAS,CAAE,CAAC,CACzC,CAAC,cACNlC,KAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBhC,KAAA,MAAAgC,QAAA,eAAGlC,IAAA,WAAAkC,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAAC9B,IAAI,CAACiC,KAAK,EAAI,CAAC,cAC9CnC,KAAA,MAAAgC,QAAA,eAAGlC,IAAA,WAAAkC,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAAC9B,IAAI,CAACkC,QAAQ,EAAI,CAAC,cAClDtC,IAAA,CAACH,IAAI,EAAC0C,EAAE,CAAC,YAAY,CAAAL,QAAA,cACnBlC,IAAA,WAAQiC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,cAAY,CAAQ,CAAC,CACjD,CAAC,cACPlC,IAAA,CAACH,IAAI,EAAC0C,EAAE,CAAC,iBAAiB,CAAAL,QAAA,cACxBlC,IAAA,WAAQiC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,gBAAc,CAAQ,CAAC,CACnD,CAAC,cACPlC,IAAA,WAAQiC,SAAS,CAAC,aAAa,CAACO,OAAO,CAAElB,YAAa,CAAAY,QAAA,CAAC,SAAO,CAAQ,CAAC,cACvElC,IAAA,WAAQiC,SAAS,CAAC,wBAAwB,CAACO,OAAO,CAAEb,mBAAoB,CAAAO,QAAA,CAAC,gBAAc,CAAQ,CAAC,EAC7F,CAAC,EACH,CAAC,cAGNhC,KAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BlC,IAAA,OAAAkC,QAAA,CAAI,mBAAiB,CAAI,CAAC,CACzBvB,KAAK,eAAIX,IAAA,MAAGiC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEvB,KAAK,CAAI,CAAC,cAC1CX,IAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BzB,WAAW,CAACgC,MAAM,GAAK,CAAC,cACvBzC,IAAA,MAAAkC,QAAA,CAAG,wBAAsB,CAAG,CAAC,CAE7BzB,WAAW,CAACiC,GAAG,CAAEC,IAAI,eACnBzC,KAAA,QAAoB+B,SAAS,CAAC,aAAa,CAAAC,QAAA,eACzClC,IAAA,QAAKmC,GAAG,CAAE,yBAAyBQ,IAAI,CAACC,KAAK,EAAG,CAACR,GAAG,CAAEO,IAAI,CAACE,WAAY,CAACZ,SAAS,CAAC,YAAY,CAAE,CAAC,cACjG/B,KAAA,MAAAgC,QAAA,eAAGlC,IAAA,WAAAkC,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAACS,IAAI,CAACE,WAAW,EAAI,CAAC,cACvD3C,KAAA,MAAAgC,QAAA,eAAGlC,IAAA,WAAAkC,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAACS,IAAI,CAACG,QAAQ,EAAI,CAAC,GAHzCH,IAAI,CAACI,GAIV,CACN,CACF,CACE,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5C,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}